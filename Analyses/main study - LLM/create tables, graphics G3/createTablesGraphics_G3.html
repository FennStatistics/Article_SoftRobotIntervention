<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julius Fenn, Louisa Estadieu">

<title>Create tables and graphics for G3 (result part II)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="createTablesGraphics_G3_files/libs/clipboard/clipboard.min.js"></script>
<script src="createTablesGraphics_G3_files/libs/quarto-html/quarto.js"></script>
<script src="createTablesGraphics_G3_files/libs/quarto-html/popper.min.js"></script>
<script src="createTablesGraphics_G3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="createTablesGraphics_G3_files/libs/quarto-html/anchor.min.js"></script>
<link href="createTablesGraphics_G3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="createTablesGraphics_G3_files/libs/quarto-html/quarto-syntax-highlighting-a8378a0342da607bf6aa9ac04725c156.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="createTablesGraphics_G3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="createTablesGraphics_G3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="createTablesGraphics_G3_files/libs/bootstrap/bootstrap-248fc53d3562cd95f231f3ec542c0df6.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="createTablesGraphics_G3_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="createTablesGraphics_G3_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="createTablesGraphics_G3_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="createTablesGraphics_G3_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="createTablesGraphics_G3_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="createTablesGraphics_G3_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="createTablesGraphics_G3_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="createTablesGraphics_G3_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="createTablesGraphics_G3_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="createTablesGraphics_G3_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes">Notes</a></li>
  <li><a href="#load-cleaned-data-files" id="toc-load-cleaned-data-files" class="nav-link" data-scroll-target="#load-cleaned-data-files">load cleaned data files</a></li>
  <li><a href="#create-table-for-supplementary-materials" id="toc-create-table-for-supplementary-materials" class="nav-link" data-scroll-target="#create-table-for-supplementary-materials">Create table for Supplementary Materials</a>
  <ul>
  <li><a href="#for-rr" id="toc-for-rr" class="nav-link" data-scroll-target="#for-rr">for RR</a></li>
  <li><a href="#for-sar" id="toc-for-sar" class="nav-link" data-scroll-target="#for-sar">for SAR</a></li>
  </ul></li>
  <li><a href="#create-plots-for-main-article" id="toc-create-plots-for-main-article" class="nav-link" data-scroll-target="#create-plots-for-main-article">Create plots for Main Article</a>
  <ul>
  <li><a href="#for-rr-1" id="toc-for-rr-1" class="nav-link" data-scroll-target="#for-rr-1">for RR</a></li>
  <li><a href="#for-sar-1" id="toc-for-sar-1" class="nav-link" data-scroll-target="#for-sar-1">for SAR</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Create tables and graphics for G3 (result part II)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Julius Fenn, Louisa Estadieu </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="notes" class="level1">
<h1>Notes</h1>
</section>
<section id="load-cleaned-data-files" class="level1">
<h1>load cleaned data files</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sets the directory of location of this script as the current directory</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd(dirname(rstudioapi::getSourceEditorContext()$path))</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">### load packages</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(pacman)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(<span class="st">'jsonlite'</span>, <span class="st">'readxl'</span>, <span class="st">'writexl'</span>, <span class="st">'ggpubr'</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>       <span class="st">'stargazer'</span>, <span class="st">'DT'</span>, <span class="st">'tools'</span>, <span class="st">'tidyverse'</span>, <span class="st">'gridExtra'</span>, <span class="st">'reshape2'</span>, <span class="st">'patchwork'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">### load abbrevations dictionary</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"data"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>abbreviations_dict <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="at">txt =</span> <span class="st">"abbreviations_dict.txt"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="do">### load frequency table of codes</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../../output/G3"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; RR</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"rescue robot frequency table codes.xlsx"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">string =</span> codes_frequency_RR<span class="sc">$</span>Code,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">"_"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">replacement =</span> <span class="st">" "</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>Code <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(codes_frequency_RR<span class="sc">$</span>Code)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>soft <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(codes_frequency_RR<span class="sc">$</span>soft)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>rigid <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(codes_frequency_RR<span class="sc">$</span>rigid)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>soft[<span class="fu">is.na</span>(codes_frequency_RR<span class="sc">$</span>soft)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR<span class="sc">$</span>rigid[<span class="fu">is.na</span>(codes_frequency_RR<span class="sc">$</span>rigid)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># codes_frequency_RR$soft &lt;- codes_frequency_RR$soft + codes_frequency_RR$rigid </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>codes_frequency_RR <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(codes_frequency_RR)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; SAR</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"socially assistive robot frequency table codes.xlsx"</span>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">string =</span> codes_frequency_SAR<span class="sc">$</span>Code,</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">"_"</span>,</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">replacement =</span> <span class="st">" "</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>Code <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(codes_frequency_SAR<span class="sc">$</span>Code)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>soft <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(codes_frequency_SAR<span class="sc">$</span>soft)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>rigid <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(codes_frequency_SAR<span class="sc">$</span>rigid)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>soft[<span class="fu">is.na</span>(codes_frequency_SAR<span class="sc">$</span>soft)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR<span class="sc">$</span>rigid[<span class="fu">is.na</span>(codes_frequency_SAR<span class="sc">$</span>rigid)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co"># codes_frequency_SAR$soft &lt;- codes_frequency_SAR$soft + codes_frequency_SAR$rigid </span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>codes_frequency_SAR <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(codes_frequency_SAR)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="do">### load improved coding guidelines</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"json RR - improved"</span>)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co"># List all JSON files in the directory</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>json_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">"json$"</span>, <span class="at">full.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store code descriptions</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>list_json_files_RR <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each JSON file</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(json_files)) {</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the JSON file</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  list_json_files_RR[[i]] <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(json_files[i])</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(list_json_files_RR) <span class="ot">&lt;-</span> json_files</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../json SAR - improved"</span>)</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="co"># List all JSON files in the directory</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>json_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">"json$"</span>, <span class="at">full.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store code descriptions</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>list_json_files_SAR <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each JSON file</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(json_files)) {</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the JSON file</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>  list_json_files_SAR[[i]] <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(json_files[i])</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(list_json_files_SAR) <span class="ot">&lt;-</span> json_files</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(i); <span class="fu">rm</span>(json_files)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-table-for-supplementary-materials" class="level1">
<h1>Create table for Supplementary Materials</h1>
<section id="for-rr" class="level2">
<h2 class="anchored" data-anchor-id="for-rr">for RR</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty data frame to store results</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>results_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">CategoryAbbrevation =</span> <span class="fu">character</span>(),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">character</span>(),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">CodeName =</span> <span class="fu">character</span>(),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">character</span>(),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the JSON files</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_json_files_RR)) {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Improve code names</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">string =</span> <span class="fu">names</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions),</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">"_"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">replacement =</span> <span class="st">" "</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions) <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get full name of category</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  tmp_categoryAbbrevation <span class="ot">&lt;-</span> <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict[</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict) <span class="sc">==</span> list_json_files_RR[[i]]<span class="sc">$</span>category])</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  tmp_category <span class="ot">&lt;-</span> abbreviations_dict<span class="sc">$</span>abbreviations_dict[</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict) <span class="sc">==</span> list_json_files_RR[[i]]<span class="sc">$</span>category</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  ][[<span class="dv">1</span>]]</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop through each code description</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions)) {</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the code name and description</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    code_name <span class="ot">&lt;-</span> <span class="fu">names</span>(list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions)[j]</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    description <span class="ot">&lt;-</span> list_json_files_RR[[i]]<span class="sc">$</span>code_descriptions[j][[<span class="dv">1</span>]]</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Append to the results data frame</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    results_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>      results_df,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">CategoryAbbrevation =</span> tmp_categoryAbbrevation,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">Category =</span> tmp_category,</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">CodeName =</span> code_name,</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">Description =</span> description,</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(results_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Abbrevation"</span>, <span class="st">"Category"</span>, <span class="st">"Code"</span>, <span class="st">"Description"</span>)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>soft <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>rigid <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="do">### add frequencies</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(c <span class="cf">in</span> <span class="fu">unique</span>(results_df<span class="sc">$</span>Abbrevation)){</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  tmp_codes_frequency <span class="ot">&lt;-</span> codes_frequency_RR[codes_frequency_RR<span class="sc">$</span>Category <span class="sc">==</span> c, ]</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp_codes_frequency)){</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    results_df<span class="sc">$</span>soft[results_df<span class="sc">$</span>Abbrevation <span class="sc">==</span> c <span class="sc">&amp;</span> results_df<span class="sc">$</span>Code <span class="sc">==</span> tmp_codes_frequency[i,<span class="st">"Code"</span>]] <span class="ot">&lt;-</span> tmp_codes_frequency[i,<span class="st">"soft"</span>]</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>rigid[results_df<span class="sc">$</span>Abbrevation <span class="sc">==</span> c <span class="sc">&amp;</span> results_df<span class="sc">$</span>Code <span class="sc">==</span> tmp_codes_frequency[i,<span class="st">"Code"</span>]] <span class="ot">&lt;-</span> tmp_codes_frequency[i,<span class="st">"rigid"</span>]</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="do">### save overall table</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(<span class="at">x =</span> results_df, <span class="at">path =</span> <span class="st">"outputs/RR_codes_complete.xlsx"</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="do">### sort according to frequency soft, and save top 20</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>results_df_sorted <span class="ot">&lt;-</span> results_df[<span class="fu">order</span>(results_df<span class="sc">$</span>soft, <span class="at">decreasing =</span> <span class="cn">TRUE</span>),]</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(<span class="at">x =</span> results_df_sorted[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, ], <span class="at">path =</span> <span class="st">"outputs/RR_codes_first20.xlsx"</span>)</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="do">### backup:</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>results_df_RR <span class="ot">&lt;-</span> results_df</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="do">### show overall table</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> results_df_RR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3cb816b064c99fe5448d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3cb816b064c99fe5448d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90"],["AN","AN","AN","AN","AN","AN","AP","AP","AP","AP","HRIN","HRIN","HRIN","HRIN","HRIP","HRIP","HRIP","R","R","R","R","R","R","R","R","R","R","R","SA","SA","SA","SA","SA","SA","SA","SA","SA","SA","SA","SA","SA","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TL","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP"],["perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived safety","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities"],["Lack of Empathy","Perspective","Perceived Negative Anthropomorphism","Lack of Alignment","Errors in Autonomy","Lack of Human Judgment","Lack of Emotionality","Efficiency","Autonomous Decisions","Human-Like Design","Fear","Reliance and Trust","Emotional Coldness","Lack of Emotional Understanding","Sustained Performance","Collaborative Support","Emotional Resilience","Durability","Technical Issues","Potential Misuse","Accuracy","Safety","Objective Concerns","Potential Physical Harm","Misidentification","Objective Threats","Unpredictability","Material","Strength","Reliability","Replaceability","Operational Efficiency","Access","Environment","Focus on Task","Search Capabilities","Automation","Physical Capabilities","Accessibility","Delivery of Goods","Operational Capability","Risk","Robot Runtime","Operational Delay","Movement","Perceived Risk","Specialization","Operational Mechanism","Pattern Recognition","Limited Autonomy","Faulty Analyses","Speed Comparison","Damage not Excludable","Error Risk","Immature Technology","Limited Flexibility","Night Vision","Enhanced Capabilities","Speed","Information Generation","Size","Remote Controlled","Search Improvement","Autonomy","Effectiveness","Basic Needs","Versatility","Specialized Tasks","Underwater Rescue","Efficiency","Continuous Operation","Mine Clearance","Assess Damage","Cost Calculation","Exploration","Adaptability","Sensor Technology","Obstacle Removal","Multiplicability","Data Collection","Situational Awareness","Strength","Accessibility","Inspection","Limitations in Handling Complex or Multiple Tasks","Readiness","Load Capacity","more Possibilities","Live Broadcasting","Flight"],["Identifies instances where participants express concerns about the absence of emotional understanding or compassion in rescue robots, including the lack of human closeness. Participants noted that the absence of empathy could hinder the robots' effectiveness in providing emotional support, impacting the quality of care and human-robot relationships in rescue scenarios.","Captures instances where participants discuss the absence of human involvement in interactions with artificial intelligence, emphasizing the reliance on AI systems and the lack of human intervention in decision-making processes.","Identifies instances where participants express discomfort or unease towards rescue robots due to their human-like characteristics, including their imitation of nature, intimidating appearance, and how these traits might evoke feelings of unease.","Identifies instances where the concept of autonomy is viewed as conflicting with the objectives of rescue missions, highlighting challenges between independent decision-making and the structured requirements of rescue operations. Participants expressed concerns about the lack of alignment between the robots' capabilities and the specific needs of complex scenarios.","Highlights errors or shortcomings arising from the autonomous functioning of robots, including their potential to make incorrect or suboptimal decisions in rescue scenarios.","Identifies concerns regarding the absence of human reasoning and intuition in rescue robots, emphasizing the limitations of robotic decision-making compared to human judgment.","Identifies instances where participants discuss how the absence of emotional depth in rescue robots allows them to handle emotionally charged situations with logic and consistency, which can be seen as a positive trait in high-stress rescue scenarios.","Identifies instances where participants highlight the operational effectiveness and productivity achieved through the autonomous functioning of rescue robots, emphasizing their ability to perform tasks quickly and without fatigue.","Identifies instances where participants discuss the potential advantages of rescue robots making autonomous decisions, emphasizing the benefits of logic over human emotions and biases in critical situations.","Identifies instances where participants value rescue robots designed with human-like or natural qualities, promoting emotional engagement, familiarity, and trust in their interactions.","Captures instances where participants express concerns about the lack of emotional understanding, empathy, and the fear or discomfort caused by emotionally detached robots in rescue scenarios.","Identifies instances where participants express concerns or expectations for rescue robots to exhibit caution and precision in their actions to prevent harm during emergency situations, and address the emotional needs of victims during rescue operations.","Identifies instances where participants express a preference for human interaction over emotionally detached or robotic interactions in emergency scenarios, highlighting concerns about the perceived emotional coldness of rescue robots.","Identifies instances where participants express frustration or disappointment with robots' inability to recognize, respond to distress or fear, or show compassion and empathy. This also encompasses concerns about emotional detachment and the absence of human-like emotional depth.","Highlights physical and mental stamina in Human-Robot-Interaction, focusing on the importance of sustaining performance and functionality during prolonged rescue operations, without unnecessary details or quotes.","Identifies instances where rescue robots provide tangible support in rescue scenarios, including the delivery of essential resources and enhancing human capabilities through collaboration and support, rather than replacement.","Focuses on emotional reassurance provided by rescue robots through their soft design, adaptable forms, or demeanor, emphasizing their ability to offer calm and optimism to victims in distress.","Identifies instances where participants express concerns about the fragility or susceptibility to damage of rescue robots due to their soft construction, including concerns about material and production defects.","Identifies instances where participants express concerns or frustrations related to the constraints or drawbacks of technical capabilities in rescue robots. This includes issues with limited senses, orientation, navigation, loss of control, and situations where autonomous systems fail to behave predictably due to software errors, as well as the inability to navigate complex environments or perform delicate tasks effectively.","Identifies instances where the responsibility associated with controlling rescue robots is highlighted as having the potential for misuse.","Identifies concerns about the ability of rescue robots to accurately respond to unique or unexpected scenarios, incorporating considerations about precision and limitations in performance under exceptional circumstances.","Identifies concerns related to the safety implications of using rescue robots, highlighting potential risks and negative outcomes associated with their deployment in emergency situations, including the endangerment of human lives.","Highlights concerns expressed by participants regarding the potential negative outcomes associated with rescue robots, emphasizing emotional or subjective perceptions rather than concrete risks.","Identifies concerns related to the possibility of harm to individuals caused by technical malfunctions or unintended actions in rescue robots, such as malfunctions leading to accidental harm, injury, or even fatalities.","Identifies instances where errors in sensor settings may result in areas being mistakenly cleared of victims, potentially leading to critical misidentification of survivors in rescue operations, including scenarios where sensors fail to detect victims accurately.","Identifies concerns expressed about the susceptibility of rescue robots to hacking, emphasizing identifiable, factual dangers or vulnerabilities that could occur in real-world scenarios.","Identifies instances where participants highlight the challenges and limitations associated with the unpredictable nature of rescue scenarios, emphasizing the need for adaptability and flexibility in rescue robot design and operation.","Addresses physical and structural considerations, such as weaknesses in soft robots or design flaws impacting resilience and performance.","Highlights the physical superiority of rescue robots, including their ability to lift heavy objects, navigate difficult terrains, and demonstrate strength beyond human capacity.","Emphasizes consistent performance, precise control, and the role of rescue robots in reducing risks by ensuring dependable operation in hazardous conditions.","Describes the ease of substituting rescue robots during operations, highlighting that material loss is less significant than human loss, reducing concerns over the robot's safety.","Emphasizes rescue robots' ability to improve overall performance, reduce response times, and minimize risks to victims and rescuers through quicker and safer interventions, incorporating the importance of speed and operational efficiency.","Focuses on the enhanced ability of rescue robots to access remote or hard-to-reach locations, enabling quicker response times and potentially saving lives.","References environments requiring specialized equipment for breathing, such as gas masks, and how rescue robots enhance safety in such conditions.","Highlights rescue robots' efficiency and effectiveness in completing tasks without emotional interference, enhancing performance and reliability in rescue missions.","Discusses the advanced ability of rescue robots to conduct searches in challenging environments using sensor technology, allowing effective operation in dark or smoke-filled areas.","Highlights the advantages of automation in simplifying complex or challenging scenarios, emphasizing the reliability and adaptability of rescue robots in hazardous conditions.","Discusses the ability of rescue robots to perform physical tasks beyond human capabilities, emphasizing their potential in challenging environments.","Describes the advantage of rescue robots being able to access tight or narrow spaces that are typically inaccessible to humans, enhancing their utility and safety in rescue operations.","Highlights the potential use of rescue robots for delivering goods in hazardous environments, like war zones, emphasizing the safety benefits.","Discusses the ability of rescue robots to function effectively in hazardous environments, showcasing their operational adaptability and reliable performance.","Identifies concerns related to potential errors in algorithms used by rescue robots, highlighting the associated risks in rescue operations.","Captures concerns and questions related to the operational duration and energy sources of rescue robots, particularly focusing on potential delays in rescue operations due to recharging requirements and energy constraints.","Identifies concerns and questions related to potential delays in the operational capabilities of rescue robots, particularly focusing on issues such as battery life, recharging times, and energy management.","Identifies references in the data where participants express concerns or observations about the restricted mobility or range of motion of rescue robots, potentially impacting their effectiveness in emergency situations.","Captures instances where participants express skepticism about the ability of AI, such as rescue robots, to accurately assess complex situations compared to human judgment.","Identifies instances where participants highlight the limited scope of rescue robots, emphasizing their specialization for particular rescue tasks while noting their limited adaptability to diverse rescue scenarios.","Identifies references to the underlying algorithms that drive the functionality and operation of rescue robots, focusing on their mechanisms and operational logic.","Identifies instances where individuals express concerns or observations about the limitations of rescue robots in recognizing patterns, potentially impacting their effectiveness in locating victims during emergencies.","Identifies instances where participants express concerns about rescue robots' limited autonomy hindering their ability to effectively respond to complex situations compared to human capabilities. May struggle to navigate unpredictable environments or adapt to dynamic circumstances due to their restricted decision-making abilities.","Identifies instances where participants express concerns about potential errors or inaccuracies in the analysis performed by rescue robots due to reliance on recognition software. Highlights the need for human oversight to prevent errors, emphasizing the importance of human judgment in critical situations.","Identifies instances where participants compare the speed of robots unfavorably to human capabilities, highlighting concerns about efficiency and performance in rescue robot technology.","Identifies instances where participants express concerns that damage to rescue robots may not be easily repairable or preventable. Participants highlighted that the soft material can damage quickly, raising concerns about the durability, repairability, and longevity of rescue robots in critical situations.","Identifies instances where concerns are raised about the potential for errors or mistakes in the performance of rescue robots. Errors can stem from software, hardware, or algorithmic issues, questioning their reliability and effectiveness in comparison to human responders.","Highlights the developmental limitations of current rescue robot technology, emphasizing the lack of readiness for efficient real-world application.","Highlights the robots' inability to adapt dynamically to unforeseen or complex situations.","Identifies references to the enhanced visual capabilities of rescue robots, particularly focusing on their ability to operate effectively in low-light or nighttime conditions.","Identifies instances where participants highlight the advantages of rescue robots possessing advanced technological features, such as enhanced sensory capabilities like night vision, air rescue, and lightweight designs for improved performance in challenging environments.","Identifies references to the potential acceleration of rescue operations through the use of robots, emphasizing the life-saving aspect of increased speed in the context of rescue missions.","Identifies instances where participants discuss the potential for rescue robots to enhance information gathering and generate real-time reports that aid in decision-making during emergencies.","Identifies references to the physical dimensions of rescue robots, highlighting instances where their size is described as exceeding human proportions and impacting their functionality.","Identifies instances where participants highlight the potential benefits of remote control technology in enhancing search operations and increasing involvement in rescue efforts.","Identifies instances where participants discuss utilizing remote control technology to enhance search operations, emphasizing the potential for improved search outcomes through increased human involvement.","Identifies instances where participants express interest or concern regarding the independence and self-governance of rescue robots in the context of potential technological advancements.","Captures references to the ability of rescue robots to endure challenging circumstances, highlighting their enhanced efficiency in disaster response scenarios.","Identifies instances where the discussion centers around providing essential supplies like food, water, and medicine to victims, emphasizing robots' roles in ensuring survival until full rescue.","Captures instances where participants highlight the diverse range of capabilities and adaptability of rescue robots, emphasizing their ability to perform unique tasks and maneuvers beyond human capacity in emergency situations.","Identifies instances where rescue robots are highlighted for their unique capabilities to perform specialized tasks beyond human capacity, such as flying, shrinking, hacking doors, and transmitting images for enhanced rescue operations.","Identifies references to the potential use of robots for underwater rescue operations, particularly in scenarios like cave rescues where human access is limited or dangerous.","Identifies instances where participants highlight the speed and effectiveness of task completion facilitated by rescue robots, including energy throughput and uninterrupted operations as contributors to efficiency.","Captures instances where participants highlight the advantage of a robot's ability to operate continuously without the need for breaks, emphasizing its potential for uninterrupted productivity and efficiency in various tasks.","Identifies references to the potential use of smaller robots for mine clearance in scenarios like spill response within the context of discussing the benefits and risks of rescue robots' technological capabilities.","Captures instances where participants discuss the potential for utilizing rescue robots to assess damage efficiently and calculate costs in the aftermath of disasters like earthquakes.","Identifies instances where participants discuss the potential for expedited damage assessment and cost calculation through the use of rescue robots in disaster scenarios.","Identifies instances where participants express the potential of rescue robots to explore and access locations beyond human reach in the context of perceived technological possibilities.","Captures instances where participants highlight the importance of rescue robots being able to adapt to various dangerous situations, such as extreme temperatures and physical conditions, in the context of discussing the perceived technological possibilities of rescue robots.","Identifies references to the use of sensor technology in facilitating rescue operations, such as clearing rubble and removing obstacles, within discussions on the benefits and risks of rescue robots' technological capabilities.","Identifies instances where participants highlight the potential of rescue robots in aiding rescue operations by clearing debris and overcoming obstacles to enhance efficiency and effectiveness.","Captures instances where participants express the belief in the limitless replication or duplication potential of rescue robots, emphasizing their perceived advantage over human limitations in terms of availability and scalability.","Identifies references to the capacity of rescue robots to gather and utilize extensive information beyond human capabilities, including mapping and geolocation tasks, within the context of exploring the perceived technological possibilities of rescue robots in terms of benefits and risks.","Captures instances where participants acknowledge the potential for rescue robots to possess enhanced situational awareness through access to diverse data sources like sensors and the internet.","Identifies instances where participants highlight the potential advantage of rescue robots possessing greater physical strength compared to humans in the context of perceived technological possibilities.","Identifies instances where participants highlight the advantage of robots, particularly drones, in accessing and navigating locations that are challenging for humans to reach, including unstable areas.","Identifies references to the utilization of artificial intelligence for the examination and assessment of impaired constructions in the context of rescue robotics research.","Highlights concerns expressed in the texts about the current capabilities of rescue robots, indicating that while they excel in individual tasks, they face challenges when it comes to handling complex or multiple tasks simultaneously.","Captures the preparedness and adaptability of rescue robots, highlighting their ability to be readily available in various locations when human rescuers may not be immediately present.","Identifies references to the potential of robots being engineered with the capability to transport heavier loads than humans, within discussions on the technological possibilities of rescue robots.","Identifies instances where participants express optimism about the expanded capabilities and potential advantages of rescue robots beyond human limitations in disaster response scenarios.","Captures instances where participants highlight the ease and advantages of live broadcasting in comparison to human-led communication methods within the context of discussing the benefits and risks associated with the perceived technological possibilities of rescue robots.","Identifies references to the ability of rescue robots to fly as a distinguishing feature when discussing the technological possibilities and capabilities of these machines in emergency situations."],[0,0,null,0,1,0,0,0,0,null,0,0,1,1,null,2,1,19,1,1,10,1,2,3,0,1,0,7,1,5,2,2,1,2,1,1,0,4,5,6,2,1,2,0,0,6,1,1,null,2,0,0,13,3,1,1,1,2,1,1,3,4,4,4,2,26,3,4,1,2,3,2,2,2,3,5,2,3,1,2,1,2,8,1,4,1,3,4,1,1],[11,3,null,2,6,7,5,4,6,null,7,7,4,9,null,2,1,2,11,8,5,4,4,9,4,1,3,1,14,31,11,30,20,11,9,12,11,22,21,6,23,1,6,2,2,16,7,8,null,4,10,2,3,12,3,2,2,2,4,9,2,5,8,6,3,10,7,11,3,5,9,3,2,2,7,5,6,4,4,4,4,1,16,2,6,6,2,9,4,3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Abbrevation<\/th>\n      <th>Category<\/th>\n      <th>Code<\/th>\n      <th>Description<\/th>\n      <th>soft<\/th>\n      <th>rigid<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Abbrevation","targets":1},{"name":"Category","targets":2},{"name":"Code","targets":3},{"name":"Description","targets":4},{"name":"soft","targets":5},{"name":"rigid","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="for-sar" class="level2">
<h2 class="anchored" data-anchor-id="for-sar">for SAR</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty data frame to store results</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>results_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">CategoryAbbrevation =</span> <span class="fu">character</span>(),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">character</span>(),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">CodeName =</span> <span class="fu">character</span>(),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">character</span>(),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the JSON files</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_json_files_SAR)) {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Improve code names</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">string =</span> <span class="fu">names</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">"_"</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">replacement =</span> <span class="st">" "</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions) <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get full name of category</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  tmp_categoryAbbrevation <span class="ot">&lt;-</span> <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict[</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict) <span class="sc">==</span> list_json_files_SAR[[i]]<span class="sc">$</span>category])</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  tmp_category <span class="ot">&lt;-</span> abbreviations_dict<span class="sc">$</span>abbreviations_dict[</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(abbreviations_dict<span class="sc">$</span>abbreviations_dict) <span class="sc">==</span> list_json_files_SAR[[i]]<span class="sc">$</span>category</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  ][[<span class="dv">1</span>]]</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop through each code description</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions)) {</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the code name and description</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    code_name <span class="ot">&lt;-</span> <span class="fu">names</span>(list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions)[j]</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    description <span class="ot">&lt;-</span> list_json_files_SAR[[i]]<span class="sc">$</span>code_descriptions[j][[<span class="dv">1</span>]]</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Append to the results data frame</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    results_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>      results_df,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">CategoryAbbrevation =</span> tmp_categoryAbbrevation,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">Category =</span> tmp_category,</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">CodeName =</span> code_name,</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">Description =</span> description,</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(results_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Abbrevation"</span>, <span class="st">"Category"</span>, <span class="st">"Code"</span>, <span class="st">"Description"</span>)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>soft <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>rigid <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="do">### add frequencies</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(c <span class="cf">in</span> <span class="fu">unique</span>(results_df<span class="sc">$</span>Abbrevation)){</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  tmp_codes_frequency <span class="ot">&lt;-</span> codes_frequency_SAR[codes_frequency_SAR<span class="sc">$</span>Category <span class="sc">==</span> c, ]</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp_codes_frequency)){</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    results_df<span class="sc">$</span>soft[results_df<span class="sc">$</span>Abbrevation <span class="sc">==</span> c <span class="sc">&amp;</span> results_df<span class="sc">$</span>Code <span class="sc">==</span> tmp_codes_frequency[i,<span class="st">"Code"</span>]] <span class="ot">&lt;-</span> tmp_codes_frequency[i,<span class="st">"soft"</span>]</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>results_df<span class="sc">$</span>rigid[results_df<span class="sc">$</span>Abbrevation <span class="sc">==</span> c <span class="sc">&amp;</span> results_df<span class="sc">$</span>Code <span class="sc">==</span> tmp_codes_frequency[i,<span class="st">"Code"</span>]] <span class="ot">&lt;-</span> tmp_codes_frequency[i,<span class="st">"rigid"</span>]</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="do">### save overall table</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(<span class="at">x =</span> results_df, <span class="at">path =</span> <span class="st">"outputs/SAR_codes_complete.xlsx"</span>)</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="do">### sort according to frequency soft, and save top 20</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>results_df_sorted <span class="ot">&lt;-</span> results_df[<span class="fu">order</span>(results_df<span class="sc">$</span>soft, <span class="at">decreasing =</span> <span class="cn">TRUE</span>),]</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(<span class="at">x =</span> results_df_sorted[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, ], <span class="at">path =</span> <span class="st">"outputs/SAR_codes_first20.xlsx"</span>)</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a><span class="do">### backup:</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>results_df_SAR <span class="ot">&lt;-</span> results_df</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a><span class="do">### show overall table</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> results_df_SAR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-b6df89dac4a416b8b46e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b6df89dac4a416b8b46e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73"],["AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","AP","AP","AP","AP","AP","AP","AP","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIN","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","HRIP","R","R","R","R","R","SA","SA","SA","SA","TL","TL","TL","TL","TL","TL","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP","TP"],["perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived negative anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived positive anthropomorphism","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived negative Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived positive Human-Robot-Interaction","perceived risks","perceived risks","perceived risks","perceived risks","perceived risks","perceived safety","perceived safety","perceived safety","perceived safety","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological limitations","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities","perceived technological possibilities"],["Deception","Interaction","Limitations","Intuition","Harmful Potential","Manipulation","Emotional Impact","Ethical Concerns","Technological Advancement","Uncanny Valley","Lack of Empathy","Feeling of Empathy","Engagement","Material","Connection","Emotional Support","Calmness","Therapeutic Applications","Lack of Emotional Understanding","Fear","Individual Response","Loneliness Risk","Competence","Age-Related Attitudes","Reliance and Trust","Emotional Dependence","Technical Knowledge","Unhealthy Relationships","Deception","Lack of Humanity","Superficial Interaction","Assistance and Cognitive Support","Emotional Support and Social Interaction","Brain Activation","Therapy Success","Target Demographic","Haptics","Patience","Dementia Care","Resource Availability","Individualized Attention","Pet Alternative","Natural Interactions","Potential Physical Harm","Technical Issues","Lack of Regulations","Data Security","Environmental Vulnerabilities","Operational Efficiency","Reliability","Material","Objectivity","Interaction","Lower Adaptability","Limited Assistance","Language Barrier","Understanding Human Emotions","Spontaneity","Support","Medical Advancement","Adaptability","Availability","Versatility","Rapid Advancement and Training","Relieving Specialists","Therapy","Emotional Support","Storage Capacity","Scalability","Time Saving","Usability","Healthcare","Multilingual"],["Identifies instances in the data where participants describe deceptive behaviors or actions that imply empathy towards individuals requiring assistance.","Captures references to the intricate and multifaceted nature of human interaction, suggesting skepticism towards the feasibility of mechanical or life-like substitutes.","Highlights the acknowledgment of the limitations of robots in understanding and responding to human emotions and needs, particularly in providing genuine emotional support and connection.","Captures instances where participants express skepticism towards socially assistive robots' ability to exhibit human-like intuition, emphasizing reliance on programmed skills over intuitive understanding.","Identifies instances where the anthropomorphism of socially assistive robots is perceived as having the potential to cause harm, particularly in scenarios involving vulnerable populations like children or the elderly.","Identifies instances in the data where individuals describe actions involving unauthorized access or coercion to influence behavior, raising concerns about manipulation rather than assistance.","Captures instances where participants express the disruption or strain on emotional connections when the socially assistive robot malfunctions or ceases to function.","Captures concerns about the potential psychological harm caused by over-anthropomorphizing robots, particularly when emotional bonds are formed that could break due to malfunctions or manipulative use.","Identifies instances where participants express observations or concerns about the blurring boundary between humans and machines in the context of socially assistive robots, reflecting on the impact of technological advancement.","Identifies instances where participants express discomfort or fear when socially assistive robots exhibit characteristics that remind them of their artificial nature, leading to a sense of unease or alienation.","Captures the inability of socially assistive robots to convey human warmth or genuine emotional connection, highlighting a key concern in the context of perceived negative anthropomorphism.","Identifies instances where participants perceive socially assistive robots as displaying a heightened sense of empathy, often attributed to their lifelike characteristics, such as soft materials or realistic emotional responses. These factors enhance the overall interaction experience.","Identifies instances where participants describe active involvement or interaction with socially assistive robots, emphasizing how prompt responses and interactive features foster connection and engagement.","Identifies instances where participants express a preference for socially assistive robots designed with soft, relatable materials, such as silicone, which foster physical affection and make the robot more approachable and human-like.","Captures instances where participants express the ease of forming a relational connection with socially assistive robots, highlighting the role of design elements, like soft materials, in facilitating human-robot bonds.","Captures instances where participants attribute emotional support qualities to socially assistive robots, viewing them as friends or listeners that aid in coping with thoughts and feelings, especially in challenging emotional situations.","Captures instances where participants highlight the calming effect of socially assistive robots, emphasizing their consistent and stable demeanor, which alleviates stress even in difficult situations.","Captures instances where participants discuss the use of socially assistive robots in therapeutic contexts, such as aiding trauma patients or emotionally vulnerable individuals by providing support and comfort.","Captures instances where participants express concerns or expectations regarding a socially assistive robot's ability to understand and respond to human emotions in a meaningful way, including the ability to compensate for the lack of physical gestures or emotional cues.","Captures instances where participants express concerns or apprehension, highlighting potential fears associated with machine interaction.","Captures the varying individual reactions to physical closeness in the context of Human-Robot-Interaction, highlighting differing preferences and triggers among participants, with a focus on comfort levels and diverse personal boundaries.","Identifies concerns related to the potential risk of loneliness stemming from the reduction of social contacts when humans are replaced by robots in socially assistive roles.","Denotes references to the necessity for both staff and clients to possess the necessary skills and knowledge to effectively interact with socially assistive robots in the context of perceived negative Human-Robot-Interaction risks and benefits.","Captures instances where older individuals express skepticism or resistance towards adopting new technologies, particularly in the context of socially assistive robots and human-robot interaction.","Identifies instances where participants express reliance on socially assistive robots for various needs or tasks, highlighting the perceived benefits and risks associated with this dependence.","Identifies instances where individuals form emotional attachments to socially assistive robots, viewing them as companions or substitutes for human relationships, highlighting concerns around emotional replacement, emotional blunting, and pseudo-relationships.","Identifies instances where participants discuss the importance of possessing technical knowledge for effectively operating socially assistive robots, including addressing communication barriers to ensure smooth interactions.","Identifies instances in the data where participants express concerns or negative experiences related to the quality or dynamics of their interactions with socially assistive robots, highlighting potential risks and challenges in forming meaningful connections.","Identifies instances where participants express concerns about the unethical practice of simulating human interaction with socially assistive robots, potentially leading to misunderstandings or misperceptions.","Captures instances where participants express a sense of loss or absence in human interactions and empathy that cannot be adequately replaced by socially assistive robots in the context of Human-Robot-Interaction, emphasizing a preference for personalized and emotionally engaging experiences.","Identifies concerns that robot interactions may feel insincere or lack depth compared to human connections.","Identifies instances where participants highlight the positive impact of socially assistive robots in assuming degrading tasks, enhancing efficiency and quality of life. Additionally, this includes their role in improving attention and supporting individuals with depression.","Identifies instances where socially assistive robots are seen as encouraging social interaction, particularly for introverted or lonely individuals, fostering increased engagement with others. This also includes their role in providing emotional support and companionship, focusing on the benefits of fostering connections and addressing social isolation.","Identifies references to engaging in activities or practices aimed at maintaining cognitive health and function, potentially related to the perceived positive Human-Robot-Interaction of socially assistive robots.","Identifies instances where participants express the potential benefits of socially assistive robots in supporting therapy, such as helping individuals with autism or related disorders, and fostering emotional attachment as a measure of success.","Identifies references to specific groups or populations that socially assistive robots are designed to benefit, such as socially isolated individuals or the elderly, within the context of discussing the key benefits and risks of Human-Robot-Interaction.","Captures instances where participants express appreciation for tactile interactions and the incorporation of materials like fur to enhance acceptance in Human-Robot-Interaction, highlighting the positive evaluation of lifelike features in soft, socially assistive robots.","Captures instances where individuals exhibit tolerance and understanding, particularly in contexts involving repetitive actions, such as interactions with individuals with dementia, within the realm of positive Human-Robot-Interaction with socially assistive robots.","Captures instances where individuals emphasize the importance of patience in providing care for individuals with dementia, highlighting the need for tolerance towards repetitive actions.","Identifies instances where participants highlight the perception of socially assistive robots having abundant and unlimited resources to support individual users in the context of Human-Robot-Interaction.","Identifies instances where the potential benefits of socially assistive robots are highlighted through the provision of personalized and individualized attention, such as tailoring care to specific needs in settings like nursing homes.","Identifies references to alternative options to traditional pets, particularly for individuals with allergies or limitations in caring for live animals, within discussions on the benefits and risks of positive Human-Robot-Interaction with socially assistive robots.","Highlights the importance of human-like movements, gestures, and reactions to enhance the realism and comfort of interactions with socially assistive robots.","Identifies instances where participants express concerns about the potential for physically harmful outcomes due to malfunctioning socially assistive robots, particularly unpredictable or unintended reactions.","Identifies instances where participants express concerns or frustrations related to malfunctions, glitches, or limitations in the technical performance of socially assistive robots, highlighting potential disruptions or challenges in their use.","Identifies instances where participants express concerns about the absence of established guidelines or regulations surrounding socially assistive robots, particularly in relation to potential risks like data security breaches.","Identifies concerns regarding the potential for data breaches, loss, or misuse when interacting with socially assistive robots, highlighting perceived risks to privacy and security.","Identifies concerns about how external factors, such as power outages, extreme temperatures, or unsuitable environments, could impair robot functionality and compromise safety or reliability.","Identifies instances in the data where participants highlight the effectiveness and productivity of socially assistive robots in performing tasks efficiently, with arguments that robots are working faster.","Captures instances where participants highlight the potential benefits of socially assistive robots in enhancing safety through quick emergency response capabilities and accuracy, and being available 24/7.","Highlights instances where participants evaluate the differences in materials used in socially assistive robots, with a focus on the low risk of injury during interactions or accidents due to the soft materials, leading to higher acceptance.","Identifies instances where participants express expectations that robots should excel in decision-making due to their perceived lack of emotional bias compared to humans.","Identifies concerns related to the potential negative outcomes or issues that may arise from interactions between humans and socially assistive robots, highlighting the importance of ensuring safe and beneficial interactions in the context of technological limitations. This includes the possibility that robots might have limited interaction capabilities due to technological limitations.","Identifies instances where participants express concerns about the restricted ability to personalize or modify socially assistive robots to suit individual needs or preferences, and their limited flexibility in adapting to different environments or changing user requirements.","Denotes instances where participants express concerns about socially assistive robots being able to offer only restricted support, particularly in urgent or critical scenarios.","Identifies instances where participants express concerns about socially assistive robots' inability to comprehend regional or individual speech patterns, including challenges faced by individuals with age-related communication difficulties.","Identifies instances where participants express skepticism about the current capabilities of socially assistive robots in understanding and mimicking human emotions.","Identifies concerns about the robot's inability to handle spontaneous or unexpected situations that it hasn't been specifically trained for.","Identifies instances where participants highlight the need for continuous and comprehensive assistance and care in relation to socially assistive robots. This includes personalized support tailored to individual needs and preferences.","Identifies instances where participants highlight the positive impact of technological advancements in medical diagnosis within the discourse on socially assistive robots.","Identifies instances where participants highlight the potential for socially assistive robots to be versatile and function effectively across various environments or contexts, making them more beneficial in diverse settings.","Captures references to the accessibility and presence of socially assistive robots beyond standard operating hours in the context of discussing the benefits and risks of their technological capabilities.","Captures instances where participants highlight the diverse range of tasks and functions that socially assistive robots can perform, emphasizing their versatility in different contexts and applications.","Identifies instances where participants highlight the ability of socially assistive robots to quickly impart new information or skills through advanced training methods.","Identifies instances where participants discuss the potential for robots to take over routine tasks traditionally performed by specialists, aiming to alleviate their workload and enhance efficiency in the context of socially assistive robots.","Identifies instances where socially assistive robots are discussed as potential tools for therapy.","Identifies instances where socially assistive robots are discussed as potential substitutes for emotional support, particularly in therapeutic settings.","Captures instances where participants highlight the potential of data storage in socially assistive robots to store diverse knowledge beyond human limitations.","Identifies references to the ease and potential for expanding the use of socially assistive robots through acquiring additional units with minimal difficulty.","Identifies instances where participants highlight the efficiency gained by using socially assistive robots to save time in caregiving tasks, potentially reducing the time spent on direct care provision.","Captures references to concerns about the functionality and practicality of socially assistive robots, including issues related to technical malfunctions and potential user health impacts.","Identifies instances where the importance of incorporating advanced technology into healthcare settings for improved patient care and outcomes is emphasized.","Identifies instances where robots are capable of understanding and communicating in multiple languages, highlighting their potential to overcome language barriers in various contexts."],[1,0,4,null,null,0,0,0,2,1,4,2,0,8,3,5,null,2,1,1,2,1,0,0,2,8,0,3,0,3,3,0,6,0,3,3,4,0,0,1,1,0,4,5,3,1,0,0,2,4,10,3,0,1,1,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,2,0,0],[1,1,9,null,null,1,2,1,1,3,12,2,1,4,2,5,null,1,4,3,2,4,1,4,2,6,5,4,1,13,7,17,23,4,4,16,2,6,5,6,9,4,5,5,7,1,6,1,5,3,4,2,3,11,14,3,5,2,4,3,8,17,7,5,3,6,2,2,2,10,6,5,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Abbrevation<\/th>\n      <th>Category<\/th>\n      <th>Code<\/th>\n      <th>Description<\/th>\n      <th>soft<\/th>\n      <th>rigid<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Abbrevation","targets":1},{"name":"Category","targets":2},{"name":"Code","targets":3},{"name":"Description","targets":4},{"name":"soft","targets":5},{"name":"rigid","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="create-plots-for-main-article" class="level1">
<h1>Create plots for Main Article</h1>
<section id="for-rr-1" class="level2">
<h2 class="anchored" data-anchor-id="for-rr-1">for RR</h2>
<p>do not filter for most frequent soft terms:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"outputs/G3_RR"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the abbreviation vector in pairs</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>abbreviation_pairs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"AN"</span>, <span class="st">"AP"</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"HRIN"</span>, <span class="st">"HRIP"</span>),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"R"</span>, <span class="st">"SA"</span>),</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"TL"</span>, <span class="st">"TP"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through abbreviation pairs</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(pair <span class="cf">in</span> abbreviation_pairs) {</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pair)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  plots <span class="ot">&lt;-</span> <span class="fu">list</span>() <span class="co"># To store individual plots</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  max_frequency <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># Initialize a variable to store the max frequency for the pair</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(c <span class="cf">in</span> pair) {</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    tmp_frequency <span class="ot">&lt;-</span> results_df_RR[results_df_RR<span class="sc">$</span>Abbrevation <span class="sc">==</span> c, ]</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    tmp_frequency <span class="ot">&lt;-</span> tmp_frequency[<span class="sc">!</span><span class="fu">is.na</span>(tmp_frequency<span class="sc">$</span>soft), ]</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Abbrevation <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Description <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    tmp_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">unique</span>(tmp_frequency<span class="sc">$</span>Category), <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the maximum frequency for the current abbreviation</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    max_count <span class="ot">&lt;-</span> <span class="fu">max</span>(tmp_frequency<span class="sc">$</span>rigid, tmp_frequency<span class="sc">$</span>soft, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    max_frequency <span class="ot">&lt;-</span> <span class="fu">max</span>(max_frequency, max_count) <span class="co"># Update the maximum across the pair</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Insert line breaks into long category names</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">str_wrap</span>(tmp_frequency<span class="sc">$</span>Code, <span class="at">width =</span> <span class="dv">20</span>)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reshape data for ggplot (long format)</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    tmp_long <span class="ot">&lt;-</span> <span class="fu">melt</span>(tmp_frequency, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Code"</span>), </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>                     <span class="at">variable.name =</span> <span class="st">"Type"</span>, <span class="at">value.name =</span> <span class="st">"Count"</span>)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reorder `Type` levels so "Rigid" appears before "Soft"</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    tmp_long<span class="sc">$</span>Type <span class="ot">&lt;-</span> <span class="fu">factor</span>(tmp_long<span class="sc">$</span>Type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"rigid"</span>, <span class="st">"soft"</span>))</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the plot</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tmp_long, <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">factor</span>(Code, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Code))), </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">x =</span> Count, <span class="at">fill =</span> Type)) <span class="sc">+</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.7</span>)) <span class="sc">+</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> tmp_title,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Category"</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Frequency"</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">"Type Robot"</span> <span class="co"># Rename legend title</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_pubr</span>() <span class="sc">+</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>), <span class="co"># Increase legend title size</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),  <span class="co"># Increase legend text size</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="cf">function</span>(labels) <span class="fu">str_wrap</span>(labels, <span class="at">width =</span> <span class="dv">20</span>))</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add plot to the list</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    plots[[c]] <span class="ot">&lt;-</span> plot</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the x-axis limits and label every second integer</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>  max_frequency <span class="ot">&lt;-</span> max_frequency <span class="sc">+</span> <span class="dv">1</span> <span class="co"># Add padding</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(c <span class="cf">in</span> pair) {</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    plots[[c]] <span class="ot">&lt;-</span> plots[[c]] <span class="sc">+</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, max_frequency, <span class="at">by =</span> <span class="dv">2</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, max_frequency)) <span class="co"># Label every second value</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the plots side by side with a shared legend</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> <span class="fu">wrap_plots</span>(plots, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span> </span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="co"># Position the shared legend at the bottom</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the overarching title</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> combined_plot <span class="sc">+</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_annotation</span>(</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Rescue Robot"</span>,</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">"bold"</span>) <span class="co"># Align left</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(combined_plot)</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Save the final combined plot</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>  combined_title <span class="ot">&lt;-</span> <span class="fu">paste</span>(pair, <span class="at">collapse =</span> <span class="st">"_"</span>)</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="fu">paste0</span>(combined_title, <span class="st">".pdf"</span>), combined_plot, <span class="at">width =</span> <span class="dv">16</span>, <span class="at">height =</span> <span class="dv">9</span>)</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AN" "AP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HRIN" "HRIP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "R"  "SA"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TL" "TP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-4-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>not side by side:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd("outputs/G3_RR")</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for(c in unique(results_df_RR$Abbrevation)){</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_frequency &lt;- results_df_RR[results_df_RR$Abbrevation == c, ]</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_frequency &lt;- tmp_frequency[!is.na(tmp_frequency$soft),]</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   # tmp_frequency &lt;- tmp_frequency[tmp_frequency$soft &gt;= median(tmp_frequency$soft, na.rm = TRUE),]</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_frequency$Abbrevation &lt;- NULL</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_frequency$Description &lt;- NULL</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_title &lt;- paste0(unique(tmp_frequency$Category), collapse = " ") # " - rescue robots"</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   cat("Plot for:\n", tmp_title, "\n")</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   # Insert line breaks into long category names</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_frequency$Code &lt;- str_wrap(tmp_frequency$Code, width = 20)</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   # Reshape data for ggplot (long format)</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   tmp_long &lt;- reshape2::melt(tmp_frequency, id.vars = c("Category", "Code"), </span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#                              variable.name = "Type", value.name = "Count")</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   # Create the plot</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   plot &lt;- ggplot(tmp_long, aes(y = factor(Code, levels = rev(unique(Code))), </span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#                                x = Count, fill = Type)) +</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#     geom_bar(stat = "identity", position = position_dodge(width = 0.7)) + # Increase bar spacing</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#     labs(</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#       title = tmp_title,</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#       y = "Category",</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#       x = "Frequency",</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#       fill = "Type"</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) +</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     theme_pubr() + # APA-like theme</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co">#     theme(</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co">#       plot.title = element_text(size = 16, face = "bold"),</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co">#       axis.title = element_text(size = 14),</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co">#       axis.title.y = element_blank(),</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co">#       axis.text.y = element_text(size = 12, hjust = 1), # Adjust y-axis text alignment</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co">#       axis.text.x = element_text(size = 14),</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#       legend.title = element_text(size = 12),</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co">#       legend.text = element_text(size = 10),</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co">#       panel.grid.major = element_blank(), # Remove grid lines for clarity</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="co">#       panel.grid.minor = element_blank()</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="co">#     ) +</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="co">#     scale_y_discrete(labels = function(labels) str_wrap(labels, width = 20)) # Ensure proper wrapping</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co">#   # Display the plot</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(plot)</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggsave(paste0(tmp_title, ".pdf"))</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="for-sar-1" class="level2">
<h2 class="anchored" data-anchor-id="for-sar-1">for SAR</h2>
<p>do not filter for most frequent soft terms:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"outputs/G3_SAR"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the abbreviation vector in pairs</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>abbreviation_pairs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"AN"</span>, <span class="st">"AP"</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"HRIN"</span>, <span class="st">"HRIP"</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"R"</span>, <span class="st">"SA"</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"TL"</span>, <span class="st">"TP"</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through abbreviation pairs</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(pair <span class="cf">in</span> abbreviation_pairs) {</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(pair)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  plots <span class="ot">&lt;-</span> <span class="fu">list</span>() <span class="co"># To store individual plots</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  max_frequency <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># Initialize a variable to store the max frequency for the pair</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(c <span class="cf">in</span> pair) {</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    tmp_frequency <span class="ot">&lt;-</span> results_df_SAR[results_df_SAR<span class="sc">$</span>Abbrevation <span class="sc">==</span> c, ]</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    tmp_frequency <span class="ot">&lt;-</span> tmp_frequency[<span class="sc">!</span><span class="fu">is.na</span>(tmp_frequency<span class="sc">$</span>soft), ]</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Abbrevation <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Description <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    tmp_title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">unique</span>(tmp_frequency<span class="sc">$</span>Category), <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the maximum frequency for the current abbreviation</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    max_count <span class="ot">&lt;-</span> <span class="fu">max</span>(tmp_frequency<span class="sc">$</span>rigid, tmp_frequency<span class="sc">$</span>soft, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    max_frequency <span class="ot">&lt;-</span> <span class="fu">max</span>(max_frequency, max_count) <span class="co"># Update the maximum across the pair</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Insert line breaks into long category names</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    tmp_frequency<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">str_wrap</span>(tmp_frequency<span class="sc">$</span>Code, <span class="at">width =</span> <span class="dv">20</span>)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reshape data for ggplot (long format)</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    tmp_long <span class="ot">&lt;-</span> <span class="fu">melt</span>(tmp_frequency, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Code"</span>), </span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>                     <span class="at">variable.name =</span> <span class="st">"Type"</span>, <span class="at">value.name =</span> <span class="st">"Count"</span>)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reorder `Type` levels so "Rigid" appears before "Soft"</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>    tmp_long<span class="sc">$</span>Type <span class="ot">&lt;-</span> <span class="fu">factor</span>(tmp_long<span class="sc">$</span>Type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"rigid"</span>, <span class="st">"soft"</span>))</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the plot</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tmp_long, <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">factor</span>(Code, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Code))), </span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">x =</span> Count, <span class="at">fill =</span> Type)) <span class="sc">+</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.7</span>)) <span class="sc">+</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> tmp_title,</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Category"</span>,</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Frequency"</span>,</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">"Type Robot"</span> <span class="co"># Rename legend title</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_pubr</span>() <span class="sc">+</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>), <span class="co"># Increase legend title size</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),  <span class="co"># Increase legend text size</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="cf">function</span>(labels) <span class="fu">str_wrap</span>(labels, <span class="at">width =</span> <span class="dv">20</span>))</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add plot to the list</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>    plots[[c]] <span class="ot">&lt;-</span> plot</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the x-axis limits and label every second integer</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>  max_frequency <span class="ot">&lt;-</span> max_frequency <span class="sc">+</span> <span class="dv">1</span> <span class="co"># Add padding</span></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(c <span class="cf">in</span> pair) {</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>    plots[[c]] <span class="ot">&lt;-</span> plots[[c]] <span class="sc">+</span></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, max_frequency, <span class="at">by =</span> <span class="dv">2</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, max_frequency)) <span class="co"># Label every second value</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the plots side by side with a shared legend</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> <span class="fu">wrap_plots</span>(plots, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span> </span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="co"># Position the shared legend at the bottom</span></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the overarching title</span></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> combined_plot <span class="sc">+</span></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_annotation</span>(</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Socially Assistive Robot"</span>,</span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">face =</span> <span class="st">"bold"</span>) <span class="co"># Align left</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(combined_plot)</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Save the final combined plot</span></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>  combined_title <span class="ot">&lt;-</span> <span class="fu">paste</span>(pair, <span class="at">collapse =</span> <span class="st">"_"</span>)</span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="fu">paste0</span>(combined_title, <span class="st">".pdf"</span>), combined_plot, <span class="at">width =</span> <span class="dv">16</span>, <span class="at">height =</span> <span class="dv">9</span>)</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AN" "AP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HRIN" "HRIP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "R"  "SA"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TL" "TP"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="createTablesGraphics_G3_files/figure-html/unnamed-chunk-6-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>